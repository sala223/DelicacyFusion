<?xml version="1.0" encoding="UTF-8"?>
<project name="build-base-jar" basedir="" default="package">
	<import file="build-env.xml" />
	<property name="build.sourceDirectory" value="${basedir}/src" />
	<property name="build.outputDirectory" value="${basedir}/bin" />
	<property name="build.outputDirectory.classes" value="${build.outputDirectory}/classes" />
	<target name="clean">
		<delete dir="${build.outputDirectory}" failonerror="true" />
	</target>
	<target name="init" depends="clean">
		<if>
			<available file="${build.outputDirectory}" type="dir" />
			<then>
				<echo message="${build.outputDirectory} directory exist, ignore create it" />
			</then>
			<else>
				<echo message="Creating directory: ${build.outputDirectory}" />
				<mkdir dir="${build.outputDirectory}" />
			</else>
		</if>
		<if>
			<available file="${build.outputDirectory.classes}" type="dir" />
			<then>
				<echo message="${build.outputDirectory.classes} directory exist, ignore create it" />
			</then>
			<else>
				<echo message="Creating directory: ${build.outputDirectory.classes}" />
				<mkdir dir="${build.outputDirectory.classes}" />
			</else>
		</if>
	</target>
	<target name="before-compile" depends="init" />
	<target name="before-jar" />
	<target name="compile" depends="before-compile">
		<javac encoding="iso-8859-1" includeantruntime="true" nowarn="${compile.nowarn}" debug="${compile.debug}" deprecation="${compile.deprecation}" source="${compile.jdk-version.source}" target="${compile.jdk-version.target}" optimize="${compile.optimize}" srcdir="${build.sourceDirectory}" destdir="${build.outputDirectory.classes}">
			<classpath refid="compile.classpath" />
		</javac>
		<copy todir="${build.outputDirectory.classes}">
			<fileset dir="${build.sourceDirectory}" excludes="**/*.java" />
		</copy>
	</target>
	<target name="jar" depends="compile,before-jar">
		<jar index="${jar.index}" basedir="${build.outputDirectory.classes}" jarfile="${build.outputDirectory}/${ant.project.name}-${build.version}.jar">
			<exclude name="test/**" />
		</jar>
	</target>
	<target name="after-jar" depends="jar" />
	<target name="package" depends="after-jar" />
</project>

