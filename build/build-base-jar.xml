<?xml version="1.0" encoding="UTF-8"?>
<project name="build-base-jar" basedir="" default="jar">
	<import file="build-env.xml" />
	<property name="build.sourceDirectory" value="${basedir}/src" />
	<property name="build.outputDirectory" value="${basedir}/bin" />
	<path id="dependent.module.classpath" />
	<target name="clean">
		<delete dir="${build.outputDirectory}" failonerror="true" />
	</target>
	<target name="init">
		<if>
			<available file="${build.outputDirectory}" type="dir" />
			<then>
				<echo message="${build.outputDirectory} directory exist, ignore create it" />
			</then>
			<else>
				<echo message="Creating directory: ${build.outputDirectory}" />
				<mkdir dir="${build.outputDirectory}" />
			</else>
		</if>
	</target>
	<target name="before-compile" depends="init" />
	<target name="before-jar" />
	<target name="compile" depends="before-compile">
		<javac encoding="iso-8859-1" includeantruntime="true" nowarn="${compile.nowarn}" debug="${compile.debug}" deprecation="${compile.deprecation}" source="${compile.jdk-version.source}" target="${compile.jdk-version.target}" optimize="${compile.optimize}" srcdir="${build.sourceDirectory}" destdir="${build.outputDirectory}">
			<classpath refid="compile.classpath" />
			<classpath refid="dependent.module.classpath" />
		</javac>
		<copy todir="${build.outputDirectory}">
			<fileset dir="${build.sourceDirectory}" excludes="**/*.java" />
		</copy>
	</target>
	<target name="jar" depends="compile,before-jar">
		<jar basedir="${build.outputDirectory}" jarfile="${ant.project.name}-${build.version}">
			<exclude name="test/**" />
		</jar>
	</target>
	<target name="package">
		<antcall target="jar"/>
	</target>
</project>

