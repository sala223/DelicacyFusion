[2013-12-22 22:37:13 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:37:13 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:13 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:13 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:37:13 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:37:13 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:37:13 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@399a09cf: startup date [Sun Dec 22 22:37:13 CST 2013]; root of context hierarchy
[2013-12-22 22:37:14 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:37:14 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:37:14 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:37:14 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6c6b9056: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:37:15 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4bc5f1be] to prepare test instance [com.df.order.test.ServiceCardServiceTest@308217cf]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createPredeployFailedPersistenceException(EntityManagerSetupImpl.java:1954)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1945)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:322)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:230)
	... 47 more
Caused by: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.ValidationException.noPrimaryKeyAnnotationsFound(ValidationException.java:1422)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.validatePrimaryKey(EntityAccessor.java:1536)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.processMappingAccessors(EntityAccessor.java:1243)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.process(EntityAccessor.java:697)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage2(MetadataProject.java:1793)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata(MetadataProcessor.java:576)
	at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:585)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1869)
	... 45 more
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@241df3e6: startup date [Sun Dec 22 22:37:15 CST 2013]; root of context hierarchy
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6968e2f5: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:37:15 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4bc5f1be] to prepare test instance [com.df.order.test.ServiceCardServiceTest@12ad5c84]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createPredeployFailedPersistenceException(EntityManagerSetupImpl.java:1954)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1945)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:322)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:230)
	... 47 more
Caused by: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.ValidationException.noPrimaryKeyAnnotationsFound(ValidationException.java:1422)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.validatePrimaryKey(EntityAccessor.java:1536)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.processMappingAccessors(EntityAccessor.java:1243)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.process(EntityAccessor.java:697)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage2(MetadataProject.java:1793)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata(MetadataProcessor.java:576)
	at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:585)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1869)
	... 45 more
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@57679b69: startup date [Sun Dec 22 22:37:15 CST 2013]; root of context hierarchy
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:37:15 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@534afbb0: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:37:16 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4bc5f1be] to prepare test instance [com.df.order.test.ServiceCardServiceTest@3eee7317]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createPredeployFailedPersistenceException(EntityManagerSetupImpl.java:1954)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1945)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:322)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:230)
	... 47 more
Caused by: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.ValidationException.noPrimaryKeyAnnotationsFound(ValidationException.java:1422)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.validatePrimaryKey(EntityAccessor.java:1536)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.processMappingAccessors(EntityAccessor.java:1243)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.process(EntityAccessor.java:697)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage2(MetadataProject.java:1793)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata(MetadataProcessor.java:576)
	at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:585)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1869)
	... 45 more
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@7c9d07e2: startup date [Sun Dec 22 22:37:16 CST 2013]; root of context hierarchy
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@287f988: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:37:16 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4bc5f1be] to prepare test instance [com.df.order.test.ServiceCardServiceTest@645510c5]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createPredeployFailedPersistenceException(EntityManagerSetupImpl.java:1954)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1945)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:322)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:230)
	... 47 more
Caused by: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.ValidationException.noPrimaryKeyAnnotationsFound(ValidationException.java:1422)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.validatePrimaryKey(EntityAccessor.java:1536)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.processMappingAccessors(EntityAccessor.java:1243)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.process(EntityAccessor.java:697)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage2(MetadataProject.java:1793)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata(MetadataProcessor.java:576)
	at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:585)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1869)
	... 45 more
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@30d4c535: startup date [Sun Dec 22 22:37:16 CST 2013]; root of context hierarchy
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:37:16 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3d255079: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:37:17 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@24e10f10] to prepare test instance [com.df.order.test.OrderServiceTest@33a3f65a]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createPredeployFailedPersistenceException(EntityManagerSetupImpl.java:1954)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1945)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:322)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:230)
	... 47 more
Caused by: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.ValidationException.noPrimaryKeyAnnotationsFound(ValidationException.java:1422)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.validatePrimaryKey(EntityAccessor.java:1536)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.processMappingAccessors(EntityAccessor.java:1243)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.process(EntityAccessor.java:697)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage2(MetadataProject.java:1793)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata(MetadataProcessor.java:576)
	at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:585)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1869)
	... 45 more
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@214bbc27: startup date [Sun Dec 22 22:37:17 CST 2013]; root of context hierarchy
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@71440b7d: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:37:17 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@24e10f10] to prepare test instance [com.df.order.test.OrderServiceTest@572de083]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createPredeployFailedPersistenceException(EntityManagerSetupImpl.java:1954)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1945)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:322)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:230)
	... 47 more
Caused by: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.ValidationException.noPrimaryKeyAnnotationsFound(ValidationException.java:1422)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.validatePrimaryKey(EntityAccessor.java:1536)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.processMappingAccessors(EntityAccessor.java:1243)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.process(EntityAccessor.java:697)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage2(MetadataProject.java:1793)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata(MetadataProcessor.java:576)
	at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:585)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1869)
	... 45 more
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@572fa89d: startup date [Sun Dec 22 22:37:17 CST 2013]; root of context hierarchy
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@77d514e3: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:37:17 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@24e10f10] to prepare test instance [com.df.order.test.OrderServiceTest@1c85f6f5]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createPredeployFailedPersistenceException(EntityManagerSetupImpl.java:1954)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1945)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:322)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:230)
	... 47 more
Caused by: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.ValidationException.noPrimaryKeyAnnotationsFound(ValidationException.java:1422)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.validatePrimaryKey(EntityAccessor.java:1536)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.processMappingAccessors(EntityAccessor.java:1243)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.process(EntityAccessor.java:697)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage2(MetadataProject.java:1793)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata(MetadataProcessor.java:576)
	at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:585)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1869)
	... 45 more
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@78f26675: startup date [Sun Dec 22 22:37:17 CST 2013]; root of context hierarchy
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:37:17 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@30899a56: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:37:18 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@24e10f10] to prepare test instance [com.df.order.test.OrderServiceTest@15f01497]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createPredeployFailedPersistenceException(EntityManagerSetupImpl.java:1954)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1945)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:322)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:230)
	... 47 more
Caused by: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.ValidationException.noPrimaryKeyAnnotationsFound(ValidationException.java:1422)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.validatePrimaryKey(EntityAccessor.java:1536)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.processMappingAccessors(EntityAccessor.java:1243)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.process(EntityAccessor.java:697)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage2(MetadataProject.java:1793)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata(MetadataProcessor.java:576)
	at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:585)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1869)
	... 45 more
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@19705d39: startup date [Sun Dec 22 22:37:18 CST 2013]; root of context hierarchy
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:37:18 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@a033c59: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:37:18 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@22bbe161] to prepare test instance [com.df.order.test.OrderDaoTest@5cc9b917]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createPredeployFailedPersistenceException(EntityManagerSetupImpl.java:1954)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1945)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:322)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:230)
	... 47 more
Caused by: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class com.df.idm.entity.Permission] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy.
	at org.eclipse.persistence.exceptions.ValidationException.noPrimaryKeyAnnotationsFound(ValidationException.java:1422)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.validatePrimaryKey(EntityAccessor.java:1536)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.processMappingAccessors(EntityAccessor.java:1243)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.process(EntityAccessor.java:697)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage2(MetadataProject.java:1793)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata(MetadataProcessor.java:576)
	at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:585)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1869)
	... 45 more
[2013-12-22 22:37:50 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:37:50 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:50 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:37:50 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:37:50 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:37:50 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:37:50 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@4b7ae6a5: startup date [Sun Dec 22 22:37:50 CST 2013]; root of context hierarchy
[2013-12-22 22:37:50 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:37:50 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:37:50 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:37:51 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:37:51 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@38ff3be5: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:37:51 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@615a74c4] to prepare test instance [com.df.order.test.ServiceCardServiceTest@79a821ca]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7220] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The @JoinColumns on the annotated element [field permissions] from the entity class [class com.df.idm.entity.Role] is incomplete. When the source entity class uses a composite primary key, a @JoinColumn must be specified for each join column using the @JoinColumns. Both the name and the referencedColumnName elements must be specified in each such @JoinColumn.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7220] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The @JoinColumns on the annotated element [field permissions] from the entity class [class com.df.idm.entity.Role] is incomplete. When the source entity class uses a composite primary key, a @JoinColumn must be specified for each join column using the @JoinColumns. Both the name and the referencedColumnName elements must be specified in each such @JoinColumn.
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createPredeployFailedPersistenceException(EntityManagerSetupImpl.java:1954)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1945)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:322)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [delicacy-fusion] failed.
Internal Exception: Exception [EclipseLink-7220] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The @JoinColumns on the annotated element [field permissions] from the entity class [class com.df.idm.entity.Role] is incomplete. When the source entity class uses a composite primary key, a @JoinColumn must be specified for each join column using the @JoinColumns. Both the name and the referencedColumnName elements must be specified in each such @JoinColumn.
	at org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:230)
	... 47 more
Caused by: Exception [EclipseLink-7220] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The @JoinColumns on the annotated element [field permissions] from the entity class [class com.df.idm.entity.Role] is incomplete. When the source entity class uses a composite primary key, a @JoinColumn must be specified for each join column using the @JoinColumns. Both the name and the referencedColumnName elements must be specified in each such @JoinColumn.
	at org.eclipse.persistence.exceptions.ValidationException.incompleteJoinColumnsSpecified(ValidationException.java:1847)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.MappingAccessor.getJoinColumnsAndValidate(MappingAccessor.java:757)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.RelationshipAccessor.processJoinTable(RelationshipAccessor.java:735)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.OneToManyAccessor.processManyToManyMapping(OneToManyAccessor.java:198)
	at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.OneToManyAccessor.process(OneToManyAccessor.java:147)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processOwningRelationshipAccessors(MetadataProject.java:1580)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage3(MetadataProject.java:1833)
	at org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata(MetadataProcessor.java:580)
	at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:585)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1869)
	... 45 more
[2013-12-22 22:39:06 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:39:06 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:39:06 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:39:06 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:39:06 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:39:06 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:39:06 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@683bf9ff: startup date [Sun Dec 22 22:39:06 CST 2013]; root of context hierarchy
[2013-12-22 22:39:07 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:39:07 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:39:07 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:39:07 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:39:16 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4c4956e0]; rollback [true]
[2013-12-22 22:39:16 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@4bb065d testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@129ec618, testMethod = testGetOccupiedTables@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@75df5b34 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:39:16 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4c4956e0]; rollback [true]
[2013-12-22 22:39:16 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@4bb065d testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@1281e1b8, testMethod = testGetServiceCardByTable@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@75df5b34 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:39:16 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (3): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4c4956e0]; rollback [true]
[2013-12-22 22:39:16 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@4bb065d testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@680dc2a, testMethod = getServiceCardById@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@75df5b34 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:39:16 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (4): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4c4956e0]; rollback [true]
[2013-12-22 22:39:16 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@4bb065d testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@4c23ad7c, testMethod = testCreateServiceCard@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@75df5b34 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:39:17 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4c4956e0]; rollback [true]
[2013-12-22 22:39:17 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@ed82ac2 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@11df2e2b, testMethod = testGetOrderByTable@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@53501237 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:39:17 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4c4956e0]; rollback [true]
[2013-12-22 22:39:17 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@ed82ac2 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@2e620d0a, testMethod = testCreateOrder@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@53501237 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:39:17 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (3): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4c4956e0]; rollback [true]
[2013-12-22 22:39:17 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@ed82ac2 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@24060c05, testMethod = testCreateOrderWithPromotionAndServiceCard@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@53501237 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:39:17 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (4): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4c4956e0]; rollback [true]
[2013-12-22 22:39:17 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@ed82ac2 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@1df0ce4d, testMethod = testCreateOrderWithServiceCard@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@53501237 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:39:17 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4c4956e0]; rollback [true]
[2013-12-22 22:39:17 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@1700bcf7 testClass = OrderDaoTest, testInstance = com.df.order.test.OrderDaoTest@317607ed, testMethod = testListUnavaliableItems@OrderDaoTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@3c0271f9 testClass = OrderDaoTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:39:17 INFO ] [Thread-0] (org.springframework.context.support.GenericApplicationContext:1045) - Closing org.springframework.context.support.GenericApplicationContext@683bf9ff: startup date [Sun Dec 22 22:39:06 CST 2013]; root of context hierarchy
[2013-12-22 22:39:17 INFO ] [Thread-0] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4b32aeb3: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:39:17 INFO ] [Thread-0] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:461) - Closing JPA EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:41:26 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:41:26 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:41:26 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:41:26 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:41:26 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:41:26 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:41:26 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@683bf9ff: startup date [Sun Dec 22 22:41:26 CST 2013]; root of context hierarchy
[2013-12-22 22:41:26 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:41:26 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:41:27 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:41:27 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:41:33 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f34784e]; rollback [true]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@472b6582 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@72155e4e, testMethod = testGetOccupiedTables@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@58e28d65 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f34784e]; rollback [true]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@472b6582 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@60e7666b, testMethod = testGetServiceCardByTable@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@58e28d65 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (3): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f34784e]; rollback [true]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@472b6582 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@3dd710f8, testMethod = getServiceCardById@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@58e28d65 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (4): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f34784e]; rollback [true]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@472b6582 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@5c9545f, testMethod = testCreateServiceCard@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@58e28d65 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f34784e]; rollback [true]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@14a1c306 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@80ac97f, testMethod = testGetOrderByTable@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7c32b4f8 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f34784e]; rollback [true]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@14a1c306 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@12e82c49, testMethod = testCreateOrder@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7c32b4f8 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (3): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f34784e]; rollback [true]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@14a1c306 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@42a70f8c, testMethod = testCreateOrderWithPromotionAndServiceCard@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7c32b4f8 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (4): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f34784e]; rollback [true]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@14a1c306 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@3566416b, testMethod = testCreateOrderWithServiceCard@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7c32b4f8 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f34784e]; rollback [true]
[2013-12-22 22:41:34 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@3a58988c testClass = OrderDaoTest, testInstance = com.df.order.test.OrderDaoTest@e872d41, testMethod = testListUnavaliableItems@OrderDaoTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@4cac0dda testClass = OrderDaoTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:41:34 INFO ] [Thread-0] (org.springframework.context.support.GenericApplicationContext:1045) - Closing org.springframework.context.support.GenericApplicationContext@683bf9ff: startup date [Sun Dec 22 22:41:26 CST 2013]; root of context hierarchy
[2013-12-22 22:41:34 INFO ] [Thread-0] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4b32aeb3: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:41:34 INFO ] [Thread-0] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:461) - Closing JPA EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:43:00 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:43:00 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:00 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:00 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:43:00 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:43:00 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:43:00 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@683bf9ff: startup date [Sun Dec 22 22:43:00 CST 2013]; root of context hierarchy
[2013-12-22 22:43:01 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:43:01 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:43:01 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:43:01 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:43:02 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4b32aeb3: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:43:02 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@7c7ae54a] to prepare test instance [com.df.order.test.ServiceCardServiceTest@68639d1e]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createDeployFailedPersistenceException(EntityManagerSetupImpl.java:820)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:760)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getAbstractSession(EntityManagerFactoryDelegate.java:204)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:182)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getDatabaseSession(EntityManagerFactoryImpl.java:527)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:358)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.exceptions.EntityManagerSetupException.deployFailed(EntityManagerSetupException.java:238)
	... 50 more
Caused by: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:696)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:632)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:568)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:799)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:743)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:239)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:685)
	... 48 more
[2013-12-22 22:43:02 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:43:02 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:02 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:02 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:43:02 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@315d438e: startup date [Sun Dec 22 22:43:03 CST 2013]; root of context hierarchy
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@526409e1: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:43:03 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@7c7ae54a] to prepare test instance [com.df.order.test.ServiceCardServiceTest@7940eadf]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createDeployFailedPersistenceException(EntityManagerSetupImpl.java:820)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:760)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getAbstractSession(EntityManagerFactoryDelegate.java:204)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:182)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getDatabaseSession(EntityManagerFactoryImpl.java:527)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:358)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.exceptions.EntityManagerSetupException.deployFailed(EntityManagerSetupException.java:238)
	... 50 more
Caused by: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:696)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:632)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:568)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:799)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:743)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:239)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:685)
	... 48 more
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@28015e4: startup date [Sun Dec 22 22:43:03 CST 2013]; root of context hierarchy
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:43:03 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1cda52a1: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:43:04 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@7c7ae54a] to prepare test instance [com.df.order.test.ServiceCardServiceTest@115989a9]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createDeployFailedPersistenceException(EntityManagerSetupImpl.java:820)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:760)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getAbstractSession(EntityManagerFactoryDelegate.java:204)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:182)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getDatabaseSession(EntityManagerFactoryImpl.java:527)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:358)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.exceptions.EntityManagerSetupException.deployFailed(EntityManagerSetupException.java:238)
	... 50 more
Caused by: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:696)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:632)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:568)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:799)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:743)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:239)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:685)
	... 48 more
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@6eff9ff: startup date [Sun Dec 22 22:43:04 CST 2013]; root of context hierarchy
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@7cadd39f: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:43:04 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@7c7ae54a] to prepare test instance [com.df.order.test.ServiceCardServiceTest@78216171]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createDeployFailedPersistenceException(EntityManagerSetupImpl.java:820)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:760)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getAbstractSession(EntityManagerFactoryDelegate.java:204)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:182)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getDatabaseSession(EntityManagerFactoryImpl.java:527)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:358)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.exceptions.EntityManagerSetupException.deployFailed(EntityManagerSetupException.java:238)
	... 50 more
Caused by: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:696)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:632)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:568)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:799)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:743)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:239)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:685)
	... 48 more
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@b3d0a63: startup date [Sun Dec 22 22:43:04 CST 2013]; root of context hierarchy
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:43:04 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@23dab792: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:43:05 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4ae000a2] to prepare test instance [com.df.order.test.OrderServiceTest@3849b215]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createDeployFailedPersistenceException(EntityManagerSetupImpl.java:820)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:760)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getAbstractSession(EntityManagerFactoryDelegate.java:204)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:182)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getDatabaseSession(EntityManagerFactoryImpl.java:527)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:358)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.exceptions.EntityManagerSetupException.deployFailed(EntityManagerSetupException.java:238)
	... 50 more
Caused by: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:696)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:632)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:568)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:799)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:743)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:239)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:685)
	... 48 more
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@400a2506: startup date [Sun Dec 22 22:43:05 CST 2013]; root of context hierarchy
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@27f55b38: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:43:05 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4ae000a2] to prepare test instance [com.df.order.test.OrderServiceTest@6eb5845c]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createDeployFailedPersistenceException(EntityManagerSetupImpl.java:820)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:760)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getAbstractSession(EntityManagerFactoryDelegate.java:204)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:182)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getDatabaseSession(EntityManagerFactoryImpl.java:527)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:358)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.exceptions.EntityManagerSetupException.deployFailed(EntityManagerSetupException.java:238)
	... 50 more
Caused by: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:696)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:632)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:568)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:799)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:743)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:239)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:685)
	... 48 more
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@52eb6290: startup date [Sun Dec 22 22:43:05 CST 2013]; root of context hierarchy
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:43:05 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@288e4234: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:43:06 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4ae000a2] to prepare test instance [com.df.order.test.OrderServiceTest@39badcaa]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createDeployFailedPersistenceException(EntityManagerSetupImpl.java:820)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:760)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getAbstractSession(EntityManagerFactoryDelegate.java:204)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:182)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getDatabaseSession(EntityManagerFactoryImpl.java:527)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:358)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.exceptions.EntityManagerSetupException.deployFailed(EntityManagerSetupException.java:238)
	... 50 more
Caused by: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:696)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:632)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:568)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:799)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:743)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:239)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:685)
	... 48 more
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@a852084: startup date [Sun Dec 22 22:43:06 CST 2013]; root of context hierarchy
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@267bdf95: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:43:06 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4ae000a2] to prepare test instance [com.df.order.test.OrderServiceTest@b45e780]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createDeployFailedPersistenceException(EntityManagerSetupImpl.java:820)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:760)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getAbstractSession(EntityManagerFactoryDelegate.java:204)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:182)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getDatabaseSession(EntityManagerFactoryImpl.java:527)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:358)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.exceptions.EntityManagerSetupException.deployFailed(EntityManagerSetupException.java:238)
	... 50 more
Caused by: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:696)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:632)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:568)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:799)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:743)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:239)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:685)
	... 48 more
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@4537c12f: startup date [Sun Dec 22 22:43:06 CST 2013]; root of context hierarchy
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:43:06 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3b038bd3: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:43:07 ERROR] [main] (org.springframework.test.context.TestContextManager:314) - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@381fd5f4] to prepare test instance [com.df.order.test.OrderDaoTest@3217a2f5]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:122)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:312)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:209)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:286)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:288)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:229)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:86)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:172)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/datasource.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1507)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:295)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1145)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:493)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:121)
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:250)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContextInternal(CacheAwareContextLoaderDelegate.java:64)
	at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:91)
	... 25 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createDeployFailedPersistenceException(EntityManagerSetupImpl.java:820)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:760)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getAbstractSession(EntityManagerFactoryDelegate.java:204)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:182)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getDatabaseSession(EntityManagerFactoryImpl.java:527)
	at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:358)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:293)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1566)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1503)
	... 40 more
Caused by: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [delicacy-fusion] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.exceptions.EntityManagerSetupException.deployFailed(EntityManagerSetupException.java:238)
	... 50 more
Caused by: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-199] (Eclipse Persistence Services - 2.5.1.v20130918-f2b9fc5): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: In order to use Fetch Group, the domain class (class com.df.idm.entity.User) has to implement FetchGroupTracker interface.
Descriptor: RelationalDescriptor(com.df.idm.entity.User --> [DatabaseTable(USERS)])

Runtime Exceptions: 
---------------------------------------------------------

	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:696)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:632)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:568)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:799)
	at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:743)
	at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:239)
	at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:685)
	... 48 more
[2013-12-22 22:43:38 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:43:39 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:39 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:43:39 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:43:39 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:43:39 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:43:39 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@683bf9ff: startup date [Sun Dec 22 22:43:39 CST 2013]; root of context hierarchy
[2013-12-22 22:43:39 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:43:39 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:43:39 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:43:39 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:43:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f1eddf1]; rollback [true]
[2013-12-22 22:43:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@7ca5cc9e testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@691cd900, testMethod = testGetOccupiedTables@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@64eac4e9 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:43:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f1eddf1]; rollback [true]
[2013-12-22 22:43:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@7ca5cc9e testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@2b0cfe06, testMethod = testGetServiceCardByTable@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@64eac4e9 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:43:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (3): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f1eddf1]; rollback [true]
[2013-12-22 22:43:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@7ca5cc9e testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@7f2f4377, testMethod = getServiceCardById@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@64eac4e9 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:43:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (4): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f1eddf1]; rollback [true]
[2013-12-22 22:43:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@7ca5cc9e testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@7862f503, testMethod = testCreateServiceCard@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@64eac4e9 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:43:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f1eddf1]; rollback [true]
[2013-12-22 22:43:49 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@7e7f3129 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@5074bba0, testMethod = testGetOrderByTable@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1fca2ea4 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:43:49 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f1eddf1]; rollback [true]
[2013-12-22 22:43:49 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@7e7f3129 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@3dc3df95, testMethod = testCreateOrder@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1fca2ea4 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:43:49 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (3): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f1eddf1]; rollback [true]
[2013-12-22 22:43:49 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@7e7f3129 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@1c804c6b, testMethod = testCreateOrderWithPromotionAndServiceCard@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1fca2ea4 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:43:49 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (4): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f1eddf1]; rollback [true]
[2013-12-22 22:43:49 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@7e7f3129 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@2d2f2edf, testMethod = testCreateOrderWithServiceCard@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1fca2ea4 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:43:49 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7f1eddf1]; rollback [true]
[2013-12-22 22:43:49 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@6e9cebcc testClass = OrderDaoTest, testInstance = com.df.order.test.OrderDaoTest@3cd6d0, testMethod = testListUnavaliableItems@OrderDaoTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1a3af1cf testClass = OrderDaoTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:43:49 INFO ] [Thread-0] (org.springframework.context.support.GenericApplicationContext:1045) - Closing org.springframework.context.support.GenericApplicationContext@683bf9ff: startup date [Sun Dec 22 22:43:39 CST 2013]; root of context hierarchy
[2013-12-22 22:43:49 INFO ] [Thread-0] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4b32aeb3: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:43:49 INFO ] [Thread-0] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:461) - Closing JPA EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:51:16 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:51:16 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:51:16 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:51:16 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:51:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:51:17 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:51:17 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@683bf9ff: startup date [Sun Dec 22 22:51:17 CST 2013]; root of context hierarchy
[2013-12-22 22:51:17 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:51:17 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:51:17 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:51:17 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:51:25 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4ee50f28]; rollback [true]
[2013-12-22 22:51:25 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@71303650 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@143df83e, testMethod = testGetOccupiedTables@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7074b8d3 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:51:25 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4ee50f28]; rollback [true]
[2013-12-22 22:51:25 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@71303650 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@665c1758, testMethod = testGetServiceCardByTable@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7074b8d3 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:51:25 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (3): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4ee50f28]; rollback [true]
[2013-12-22 22:51:25 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@71303650 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@64c40106, testMethod = getServiceCardById@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7074b8d3 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:51:25 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (4): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4ee50f28]; rollback [true]
[2013-12-22 22:51:25 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@71303650 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@7ba9ca2f, testMethod = testCreateServiceCard@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7074b8d3 testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:51:25 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4ee50f28]; rollback [true]
[2013-12-22 22:51:25 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@36037dd4 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@1f3a0500, testMethod = testGetOrderByTable@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1a1e5304 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:51:25 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4ee50f28]; rollback [true]
[2013-12-22 22:51:25 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@36037dd4 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@c3e710d, testMethod = testCreateOrder@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1a1e5304 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:51:25 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (3): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4ee50f28]; rollback [true]
[2013-12-22 22:51:26 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@36037dd4 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@2c2a0da7, testMethod = testCreateOrderWithPromotionAndServiceCard@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1a1e5304 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:51:26 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (4): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4ee50f28]; rollback [true]
[2013-12-22 22:51:26 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@36037dd4 testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@706c6f18, testMethod = testCreateOrderWithServiceCard@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1a1e5304 testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:51:26 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4ee50f28]; rollback [true]
[2013-12-22 22:51:26 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@5d8bbd6f testClass = OrderDaoTest, testInstance = com.df.order.test.OrderDaoTest@141f264, testMethod = testListUnavaliableItems@OrderDaoTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@109083e1 testClass = OrderDaoTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:51:26 INFO ] [Thread-0] (org.springframework.context.support.GenericApplicationContext:1045) - Closing org.springframework.context.support.GenericApplicationContext@683bf9ff: startup date [Sun Dec 22 22:51:17 CST 2013]; root of context hierarchy
[2013-12-22 22:51:26 INFO ] [Thread-0] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4b32aeb3: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:51:26 INFO ] [Thread-0] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:461) - Closing JPA EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:56:38 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 22:56:38 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:56:38 INFO ] [main] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 22:56:38 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 22:56:38 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 22:56:38 INFO ] [main] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 22:56:38 INFO ] [main] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@683bf9ff: startup date [Sun Dec 22 22:56:38 CST 2013]; root of context hierarchy
[2013-12-22 22:56:38 INFO ] [main] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 22:56:38 INFO ] [main] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 22:56:39 INFO ] [main] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 22:56:39 INFO ] [main] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@24124908]; rollback [true]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@3c80a259 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@2122a017, testMethod = testGetOccupiedTables@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@683c56ff testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@24124908]; rollback [true]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@3c80a259 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@5b900808, testMethod = testGetServiceCardByTable@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@683c56ff testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (3): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@24124908]; rollback [true]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@3c80a259 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@6ecc926e, testMethod = getServiceCardById@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@683c56ff testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (4): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@24124908]; rollback [true]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@3c80a259 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@6b049834, testMethod = testCreateServiceCard@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@683c56ff testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@24124908]; rollback [true]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@3c44ec9e testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@510a97fb, testMethod = testGetOrderByTable@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@e80094e testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@24124908]; rollback [true]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@3c44ec9e testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@62abdabd, testMethod = testCreateOrder@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@e80094e testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (3): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@24124908]; rollback [true]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@3c44ec9e testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@41340, testMethod = testCreateOrderWithPromotionAndServiceCard@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@e80094e testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:56:48 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (4): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@24124908]; rollback [true]
[2013-12-22 22:56:49 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@3c44ec9e testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@1a3af1cf, testMethod = testCreateOrderWithServiceCard@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@e80094e testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:56:49 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@24124908]; rollback [true]
[2013-12-22 22:56:49 INFO ] [main] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@3d95ea4e testClass = OrderDaoTest, testInstance = com.df.order.test.OrderDaoTest@3d49c678, testMethod = testListUnavaliableItems@OrderDaoTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@36850fb7 testClass = OrderDaoTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 22:56:49 INFO ] [Thread-0] (org.springframework.context.support.GenericApplicationContext:1045) - Closing org.springframework.context.support.GenericApplicationContext@683bf9ff: startup date [Sun Dec 22 22:56:38 CST 2013]; root of context hierarchy
[2013-12-22 22:56:49 INFO ] [Thread-0] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4b32aeb3: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 22:56:49 INFO ] [Thread-0] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:461) - Closing JPA EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 23:24:18 INFO ] [Test worker] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/datasource.xml]
[2013-12-22 23:24:18 INFO ] [Test worker] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'dataSource': replacing [Generic bean: class [org.springframework.jndi.JndiObjectFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.jdbc.datasource.DriverManagerDataSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 23:24:18 INFO ] [Test worker] (org.springframework.beans.factory.support.DefaultListableBeanFactory:682) - Overriding bean definition for bean 'entityManagerFactory': replacing [Generic bean: class [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]] with [Generic bean: class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/datasource.xml]]
[2013-12-22 23:24:18 INFO ] [Test worker] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/order-beans.xml]
[2013-12-22 23:24:18 INFO ] [Test worker] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/master-data-beans.xml]
[2013-12-22 23:24:18 INFO ] [Test worker] (org.springframework.beans.factory.xml.XmlBeanDefinitionReader:316) - Loading XML bean definitions from class path resource [META-INF/blob-store-beans.xml]
[2013-12-22 23:24:18 INFO ] [Test worker] (org.springframework.context.support.GenericApplicationContext:524) - Refreshing org.springframework.context.support.GenericApplicationContext@30ab0028: startup date [Sun Dec 22 23:24:18 CST 2013]; root of context hierarchy
[2013-12-22 23:24:18 INFO ] [Test worker] (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer:172) - Loading properties file from class path resource [META-INF/test_env.properties]
[2013-12-22 23:24:18 INFO ] [Test worker] (org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor:140) - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2013-12-22 23:24:18 INFO ] [Test worker] (org.springframework.jdbc.datasource.DriverManagerDataSource:133) - Loaded JDBC driver: com.mysql.jdbc.Driver
[2013-12-22 23:24:18 INFO ] [Test worker] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:289) - Building JPA container EntityManagerFactory for persistence unit 'delicacy-fusion'
[2013-12-22 23:24:21 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3df0efd5]; rollback [true]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@718ac146 testClass = OrderDaoTest, testInstance = com.df.order.test.OrderDaoTest@4c9714e6, testMethod = testListUnavaliableItems@OrderDaoTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@52dd2f52 testClass = OrderDaoTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3df0efd5]; rollback [true]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@5c167eac testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@48d67d6f, testMethod = testGetOrderByTable@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@5b794a2d testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3df0efd5]; rollback [true]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@5c167eac testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@1d0a7f35, testMethod = testCreateOrder@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@5b794a2d testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (3): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3df0efd5]; rollback [true]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@5c167eac testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@73a21ff5, testMethod = testCreateOrderWithPromotionAndServiceCard@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@5b794a2d testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (4): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3df0efd5]; rollback [true]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@5c167eac testClass = OrderServiceTest, testInstance = com.df.order.test.OrderServiceTest@40f6a3, testMethod = testCreateOrderWithServiceCard@OrderServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@5b794a2d testClass = OrderServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3df0efd5]; rollback [true]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@6c49a53 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@556fc29d, testMethod = testGetOccupiedTables@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1c51fd3d testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3df0efd5]; rollback [true]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@6c49a53 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@60981140, testMethod = testGetServiceCardByTable@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1c51fd3d testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (3): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3df0efd5]; rollback [true]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@6c49a53 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@29a45701, testMethod = getServiceCardById@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1c51fd3d testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:274) - Began transaction (4): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3df0efd5]; rollback [true]
[2013-12-22 23:24:22 INFO ] [Test worker] (org.springframework.test.context.transaction.TransactionalTestExecutionListener:294) - Rolled back transaction after test execution for test context [TestContext@6c49a53 testClass = ServiceCardServiceTest, testInstance = com.df.order.test.ServiceCardServiceTest@5207878f, testMethod = testCreateServiceCard@ServiceCardServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1c51fd3d testClass = ServiceCardServiceTest, locations = '{classpath:META-INF/datasource.xml, classpath:META-INF/order-beans.xml, classpath:META-INF/master-data-beans.xml, classpath:META-INF/blob-store-beans.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{test}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
[2013-12-22 23:24:22 INFO ] [Thread-4] (org.springframework.context.support.GenericApplicationContext:1045) - Closing org.springframework.context.support.GenericApplicationContext@30ab0028: startup date [Sun Dec 22 23:24:18 CST 2013]; root of context hierarchy
[2013-12-22 23:24:22 INFO ] [Thread-4] (org.springframework.beans.factory.support.DefaultListableBeanFactory:452) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@57d2ea56: defining beans [dataSource,transactionManager,entityManagerFactory,propertyConfigurer,dataSource-sqlServer,jpaDialect,persistenceUnitManager,orderDao,orderService,serviceCardDao,serviceCardService,paymentDao,paymentService,diningTableDistributor,paymentCalculator,promotionRepository,promotionExecutor,ruleRepository,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,itemTemplateDao,roomDao,diningTableDao,storeDao,itemDao,promotionDao,storeServive,itemServive,itemTemplateServive,roomServive,tableServive,categoryLoader,configurator,tenantDao,tenantService,imageService,imageServiceRoute,imageKeyResolver,imageLinkCreator,imageReferenceFactory,objectMapper,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor]; root of factory hierarchy
[2013-12-22 23:24:22 INFO ] [Thread-4] (org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean:461) - Closing JPA EntityManagerFactory for persistence unit 'delicacy-fusion'
