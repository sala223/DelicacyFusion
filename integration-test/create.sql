CREATE TABLE DELIVERY (DELIVERYID BIGINT AUTO_INCREMENT NOT NULL, TENANT_ID VARCHAR(12), CLOSE_TIME TIME, CREATE_TIME DATETIME NOT NULL, ORDER_ID BIGINT NOT NULL, OWNER_ID BIGINT NOT NULL, STATUS VARCHAR(32), STORE_ID BIGINT NOT NULL, PRIMARY KEY (DELIVERYID))
CREATE TABLE ORDERS (ORDER_ID BIGINT AUTO_INCREMENT NOT NULL, TENANT_ID VARCHAR(12), CLOSE_TIME TIME, COMMENT VARCHAR(255), CREATE_TIME DATETIME NOT NULL, DEPOSIT FLOAT, DINNER_TIME TIME NOT NULL, DISCOUNT FLOAT, IS_TAKE_OUT TINYINT(1) default 0, OTHER_FEE FLOAT, OWNER_ID BIGINT NOT NULL, PROMOTIONDETAILS VARCHAR(255), SERVICE_FEE FLOAT, STATUS VARCHAR(32), STORE_ID BIGINT NOT NULL, TOTAL_PAYMENT FLOAT, PRIMARY KEY (ORDER_ID))
CREATE TABLE PAYMENT (PAYMENT_ID BIGINT AUTO_INCREMENT NOT NULL, TENANT_ID VARCHAR(12), CLOSE_TIME TIME, CREATE_TIME DATETIME NOT NULL, ORDER_ID BIGINT NOT NULL, OWNER_ID BIGINT NOT NULL, PRICE_UNIT VARCHAR(255), STATUS VARCHAR(32), STORE_ID BIGINT NOT NULL, TOTAL_PRICE FLOAT, PRIMARY KEY (PAYMENT_ID))
CREATE TABLE CATEGORY (ID BIGINT AUTO_INCREMENT NOT NULL, TENANT_ID VARCHAR(12), CHANGED_TIME DATETIME, CODE VARCHAR(255), CREATED_BY BIGINT, CREATED_TIME DATETIME NOT NULL, IS_ENABLED TINYINT(1) default 0, NAME VARCHAR(128), PRIMARY KEY (ID))
CREATE UNIQUE INDEX IDX_CATEGORY_T_CODE ON CATEGORY (code, TENANT_ID)
CREATE INDEX INDEX_CATEGORY_CODE ON CATEGORY (CODE)
CREATE TABLE DINING_TABLE (ID BIGINT AUTO_INCREMENT NOT NULL, BAR_CODE VARCHAR(128) NOT NULL, CAPACITY INTEGER, NUMBER VARCHAR(32) NOT NULL, ROOM_ID BIGINT, PRIMARY KEY (ID))
CREATE UNIQUE INDEX IDX_DT_BAR_CODE ON DINING_TABLE (BAR_CODE)
CREATE INDEX IDX_DT_NUMBE ON DINING_TABLE (NUMBER)
CREATE TABLE ITEM (ID BIGINT AUTO_INCREMENT NOT NULL, TENANT_ID VARCHAR(12), CHANGED_TIME DATETIME, CODE VARCHAR(255), CREATED_BY BIGINT, CREATED_TIME DATETIME NOT NULL, IS_ENABLED TINYINT(1) default 0, PRICE FLOAT, STORE_CODE VARCHAR(255), ITEMTEMPLATE_ID BIGINT, PRIMARY KEY (ID))
CREATE INDEX INDEX_ITEM_CODE ON ITEM (CODE)
CREATE TABLE ITEM_TEMPLATE (ID BIGINT AUTO_INCREMENT NOT NULL, TENANT_ID VARCHAR(12), CHANGED_TIME DATETIME, CODE VARCHAR(255), CREATED_BY BIGINT, CREATED_TIME DATETIME NOT NULL, DESCRIPTION LONGTEXT, IS_ENABLED TINYINT(1) default 0, ITEM_UNIT VARCHAR(255), NAME VARCHAR(128), PRICE FLOAT, PRICE_UNIT VARCHAR(255), TYPE VARCHAR(64), PRIMARY KEY (ID))
CREATE UNIQUE INDEX IDX_ITEM_TPL_T_CODE ON ITEM_TEMPLATE (CODE, TENANT_ID)
CREATE INDEX IDX_ITEM_TPL_T_NAME ON ITEM_TEMPLATE (NAME, TENANT_ID)
CREATE INDEX INDEX_ITEM_TEMPLATE_CODE ON ITEM_TEMPLATE (CODE)
CREATE TABLE PROMOTION (ID BIGINT AUTO_INCREMENT NOT NULL, TENANT_ID VARCHAR(12), CATEGORYID BIGINT, CHANGED_TIME DATETIME, CODE VARCHAR(255), CREATED_BY BIGINT, CREATED_TIME DATETIME NOT NULL, DETAILS VARCHAR(255), IS_ENABLED TINYINT(1) default 0, ITEMCODE VARCHAR(255), RULEID VARCHAR(255), STOREID BIGINT NOT NULL, TYPE VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE INDEX INDEX_PROMOTION_CODE ON PROMOTION (CODE)
CREATE TABLE ROOM (ID BIGINT AUTO_INCREMENT NOT NULL, TENANT_ID VARCHAR(12), CHANGED_TIME DATETIME, CODE VARCHAR(255), CREATED_BY BIGINT, CREATED_TIME DATETIME NOT NULL, DESCRIPTION VARCHAR(255), IS_ENABLED TINYINT(1) default 0, MINIMUM_COST DOUBLE, MINIMUM_COST_UNIT VARCHAR(255), NAME VARCHAR(255) NOT NULL, STORE_CODE VARCHAR(255) NOT NULL, TABLE_CAPACITY INTEGER, PRIMARY KEY (ID))
CREATE UNIQUE INDEX IDX_ROOM_STR_CODE ON ROOM (STORE_CODE, CODE, TENANT_ID)
CREATE UNIQUE INDEX IDX_ROOM_STR_NAME ON ROOM (STORE_CODE, NAME, TENANT_ID)
CREATE INDEX INDEX_ROOM_CODE ON ROOM (CODE)
CREATE TABLE STORE (ID BIGINT AUTO_INCREMENT NOT NULL, TENANT_ID VARCHAR(12), BUSINESS_HOUR_FROM INTEGER NOT NULL, BUSINESS_HOUR_TO INTEGER NOT NULL, CHANGED_TIME DATETIME, CODE VARCHAR(255), CREATED_BY BIGINT, CREATED_TIME DATETIME NOT NULL, DESCRIPTION LONGTEXT, IS_ENABLED TINYINT(1) default 0, NAME VARCHAR(255) NOT NULL, TELEPHONE1 VARCHAR(32) NOT NULL, TELEPHONE2 VARCHAR(32), TRAFFIC_INFO VARCHAR(512), PRIMARY KEY (ID))
CREATE UNIQUE INDEX IDX_STORE_T_CODE ON STORE (CODE, TENANT_ID)
CREATE UNIQUE INDEX IDX_STORE_T_NAME ON STORE (NAME, TENANT_ID)
CREATE INDEX INDEX_STORE_CODE ON STORE (CODE)
CREATE TABLE DELIVERY_LINE (ITEM_CODE VARCHAR(255) NOT NULL, LINE_NUMBER BIGINT NOT NULL, QUANTITY INTEGER, ROOM_CODE VARCHAR(255), order_id BIGINT)
CREATE TABLE ORDER_LINE (COMMENT VARCHAR(255), DISCOUNT FLOAT, ITEM_CODE VARCHAR(255) NOT NULL, LINE_NUMBER INTEGER NOT NULL, PRICE FLOAT, PRICE_UNIT INTEGER, PROMOTION_DETAILS VARCHAR(255), QUANTITY INTEGER, ROOM_CODE VARCHAR(255), TOTAL_PAYMENT FLOAT, ORDER_ID BIGINT)
CREATE TABLE PAYMENT_LINE (ITEM_CODE VARCHAR(255) NOT NULL, LINE_NUMBER BIGINT NOT NULL, QUANTITY INTEGER, TOTAL_PRICE FLOAT, PAYMENT_ID BIGINT)
CREATE TABLE ITEM_TEMPLATE_PICTURE (COMMENTS VARCHAR(512), RAW_IMG_ID VARCHAR(512) NOT NULL, SCALE1_IMG_ID VARCHAR(512), SCALE2_IMG_ID VARCHAR(512), SCALE3_IMG_ID VARCHAR(512), ITEM_TEMPLATE_ID BIGINT)
CREATE TABLE ITEM_TEMPLATE_CATEGORY (ITEM_TEMPLATE_ID BIGINT, CATEGORY_CODE VARCHAR(255))
CREATE TABLE STORE_ADDRESS (ADDRESS VARCHAR(512) NOT NULL, CITY VARCHAR(128) NOT NULL, COUNTRY VARCHAR(128) NOT NULL, COUNTY VARCHAR(128) NOT NULL, PROVINCE VARCHAR(128) NOT NULL, TOWN VARCHAR(128) NOT NULL, STORE_ID BIGINT)
ALTER TABLE DINING_TABLE ADD CONSTRAINT FK_DINING_TABLE_ROOM_ID FOREIGN KEY (ROOM_ID) REFERENCES ROOM (ID)
ALTER TABLE ITEM ADD CONSTRAINT FK_ITEM_ITEMTEMPLATE_ID FOREIGN KEY (ITEMTEMPLATE_ID) REFERENCES ITEM_TEMPLATE (ID)
ALTER TABLE DELIVERY_LINE ADD CONSTRAINT FK_DELIVERY_LINE_order_id FOREIGN KEY (order_id) REFERENCES DELIVERY (DELIVERYID)
ALTER TABLE ORDER_LINE ADD CONSTRAINT FK_ORDER_LINE_ORDER_ID FOREIGN KEY (ORDER_ID) REFERENCES ORDERS (ORDER_ID)
ALTER TABLE PAYMENT_LINE ADD CONSTRAINT FK_PAYMENT_LINE_PAYMENT_ID FOREIGN KEY (PAYMENT_ID) REFERENCES PAYMENT (PAYMENT_ID)
ALTER TABLE ITEM_TEMPLATE_PICTURE ADD CONSTRAINT FK_ITEM_TEMPLATE_PICTURE_ITEM_TEMPLATE_ID FOREIGN KEY (ITEM_TEMPLATE_ID) REFERENCES ITEM_TEMPLATE (ID)
ALTER TABLE ITEM_TEMPLATE_CATEGORY ADD CONSTRAINT FK_ITEM_TEMPLATE_CATEGORY_ITEM_TEMPLATE_ID FOREIGN KEY (ITEM_TEMPLATE_ID) REFERENCES ITEM_TEMPLATE (ID)
ALTER TABLE STORE_ADDRESS ADD CONSTRAINT FK_STORE_ADDRESS_STORE_ID FOREIGN KEY (STORE_ID) REFERENCES STORE (ID)
